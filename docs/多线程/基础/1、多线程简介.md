#### 1、进程
 进程：进程是一个具有一定独立功能的程序关于某个数据集合的一次运行活动。它是操作系统动态执行的基本单元，在传统的操作系统中，进程既是基本的分配单元，也是基本的执行单元。
- 其实可以简单的认为一个应用程序就是一个进程，不过要注意的是有些应用程序会启动多个进程，即一个应用程序至少启动一个进程

#### 2、线程
线程：通常在一个进程中可以包含若干个线程，当然一个进程中至少有一个线程，不然没有存在的意义。线程可以利用进程所拥有的资源，在引入线程的操作系统中，通常都是把进程作为分配资源的基本单位，而把线程作为独立运行和独立调度的基本单位，由于线程比进程更小，基本上不拥有系统资源，故对它的调度所付出的开销就会小得多，能更高效的提高系统多个程序间并发执行的程度。
- 线程是进程中的一个执行场景，一个进程可以启动多个线程，而且使用多线程是提高CPU的使用率，不是提高执行速度

比如一个程序要从本地硬盘中读取和处理文件，假设从硬盘读取一个文件要用6秒，处理一个文件用2秒，如果处理两个文件需要使用16秒
```
6秒读取文件A
2秒处理文件A
6秒读取文件B
2秒处理文件B
```
在磁盘读取文件时，CPU是在等待磁盘读取数据，此时CPU是空闲的，一秒钟的时间对于CPU来说可以做非常多的事情，可以利用这段空闲时间去做别的事情，来改变一下上面程序的操作顺序
```
6秒读取文件A
6秒读取文件B + 2秒处理文件A（利用CPU空闲时间）
2秒处理文件B
```
总结：此时所花费的时间就是14秒，就是通过提高CPU的利用率来减少操作时间

#### 3、进程与线程

- 进程是系统进行资源分配和调度的基本段位

- 线程是CPU分配的基本单元

1、进程和线程之间的内存是独立的，这样可以提高应用程序的稳定性和安全性
2、线程和进程之间共享堆内存和方法区，栈内存则是独立的，每个线程都有自己独立的栈

- 进程中多个线程共享进行之间的资源

- 应用场景
  - 迅雷同时下载多个文件
  - word如没有保存，停电关机，再通电后打开word可以恢复之前未保存的文档，word也会检查你的拼写，两个线程：容灾备份，语法检查
#### 4、并发
并发指的是两个或两个以上的任务都请求运行，而CPU只能接受一个任务，就把两个任务安排轮流进行，由于时间的间隔很短，使人感觉两个任务同时运行

#### 5、并行
并行就是两个或两个以上的任务同时进行，就是甲任务进行的同时乙任务也在进行（需要多核CPU才能实现）

#### 6、多线程的缺点
- 设计复杂
  多线程中共享堆区和方法区，并且一些数据是可以共享的，这就要求在设计的时候确保数据的准确性
- 资源消耗增多
  栈内存的数据是不共享的，数据线程中私有的，如果启用多个线程的话会占用更多的内存

多线程是提高CPU的利用率不是提高CPU的执行速度
#### 7、官方解释

> 线程是程序中执行的线程。Java虚拟机允许应用程序同时执行多个执行线程

> 每个线程都有优先权。具有较高优先级的线程比较低优先级别的线程先执行。但是每个 线程不会被标记为守护程序。仅当创建线程是守护进程才是守护线程

> 当Java虚拟机启动时，通常有一个非守护进程线程（通常调用某些指定类命为main的方法）。Java虚拟机将继续执行线程，直到发生以下任一情况
> 1、已经调用了Runtime类中的exit方法，并且安全管理器已经允许执行退出操作
> 2、所有不是守护进程的线程都已经死亡，无论从调用返回到run方法还是抛出超出run方法的run
#### 8、常用API

```
Thread.State  //  查看线程状态
MAX_PRIORITY  //线程可以拥有的最大优先级
MIN_PRIORITY  //线程可以拥有的最小优先级
NORM_PRIORITY  //分配给线程的默认优先级
```

```java
Scanner input = new Scanner(System.in);
String s  = input.nextLine();
input.close();
```

#### 9、多进程的方式也可以实现并发，为什么我们要使用多线程？

- 程间的通信比较复杂，而线程间的通信比较简单，通常情况下，我们需要使用共享资源，这些资源在线程间的通信比较容易。
- 进程是重量级的，而线程是轻量级的，故多线程方式的系统开销更小。

#### 10、上下文切换

> 在多线程编程中，线程个数一般都是大于CPU个数的，而每个CPU同一时刻只能被一个线程使用，为了让用户感觉多个线程在同时执行，CPU资源的分配采用了时间片轮转的资源，也就是为每一个线程分配一个时间片，线程在时间片内占用CPU执行任务。当前线程使用完时间片后，就会处于就绪状态并让出CPU让其他线程占用，这就是**上下文切换**。
>
> 切换之后，那怎么知道之前线程运行到哪里呢？这就在切换之前需要保存当前线程的执行现场，这就是为什么要尽可能的避免线程上下文切换。

- 线程上下文切换的时机：当前线程的CPU时间片使用完处于就绪状态时，当前线程被其他线程中断。

